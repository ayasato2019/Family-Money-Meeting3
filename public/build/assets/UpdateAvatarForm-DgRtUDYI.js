import{K as j,m as b,r as n,j as a}from"./app-pRJMbL3L.js";import{I as f}from"./InputError-EI1PlPF7.js";import{I as N}from"./InputLabel-B_eucDkD.js";import{P as y}from"./PrimaryButton-DcvAjuKh.js";import{z as $}from"./transition-BFYb_VX9.js";function _({className:c=""}){const t=j().props.auth.user,{data:r,setData:i,patch:m,errors:d,processing:u,recentlySuccessful:p}=b({name:t.name,email:t.email,avatar:t.avatar?Number(t.avatar):1}),[s,v]=n.useState(null);n.useEffect(()=>{v(String(r.avatar))},[r.avatar]);const x=o=>{o.preventDefault(),console.log("送信するデータ:",r.avatar),m(route("avatar-update"),{preserveScroll:!0})},l=`${"http://localhost".replace(/\/$/,"")}/storage/images/avatar/`;return a.jsxs("section",{className:c,children:[a.jsx("header",{children:a.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"アバターの変更"})}),a.jsx("div",{className:"mt-4 flex justify-center",children:a.jsx("img",{src:`${l}avatar_${s}.webp`,alt:"選択中のアバター",className:"!w-24 !h-24 rounded-full border-2 border-gray-300 transition-all duration-200"},`selected-avatar-${s}`)}),a.jsxs("form",{onSubmit:x,className:"mt-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx(N,{value:"アバターを選択"}),a.jsx("div",{className:"mt-2 grid grid-cols-5 gap-1",children:Array.from({length:5},(o,h)=>{const e=h+1;return a.jsxs("label",{className:"cursor-pointer",children:[a.jsx("input",{type:"radio",name:"avatar",value:e,checked:Number(r.avatar)===e,onChange:g=>i("avatar",Number(g.target.value)),className:"hidden"}),a.jsx("img",{src:`${l}avatar_${e}.webp`,alt:`アバター ${e}`,className:`!w-16 !h-16 rounded-full border-2 transition ${Number(r.avatar)===e?"border-blue-500 scale-110":"border-gray-300"}`},`avatar-${e}`)]},`avatar-label-${e}`)})}),a.jsx(f,{className:"mt-2",message:d.avatar})]}),a.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[a.jsx(y,{disabled:u,children:"保存"}),a.jsx($,{show:p,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:a.jsx("p",{className:"text-sm text-gray-600",children:"保存しました"})})]})]})]})}export{_ as default};
