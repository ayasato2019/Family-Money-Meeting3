import{K as F,m as H,r as l,j as t,L as k,S as D}from"./app-a5Z67Sxk.js";import{A as q}from"./AuthenticatedLayout-D08LvVzT.js";import{F as P}from"./FarstView-Dj1eLrt8.js";import{I as o}from"./InputLabel-D6vJR-Sm.js";import{P as B}from"./PrimaryButton-nhEvVEjN.js";import{C as R}from"./Checkbox-C7jCAUav.js";import{T as $}from"./TextInput-C8uLJfbC.js";import{I as z,L as K,E as V}from"./GenericList-PWpZFRkw.js";import{C as G}from"./Comment-DufeItrM.js";import{I as J,a as Q}from"./InputPrice-Cu0q-h8d.js";import"./ApplicationLogo-Cen0c3bu.js";import"./Modal-2Thaw8CE.js";import"./transition-C5Yu2ol5.js";import"./dialog-gkUueo9u.js";import"./PrimaryButton-SKXcVchN.js";function ue({listdata:f}){const i="ほしい",{auth:j,team_id:v,role:W,comments:d}=F().props,c=j.user,{data:s,setData:a,post:n,reset:C,processing:_}=H({title:"",price:0,date:"",achieve:1,is_shared:0,images:"",memo:"",comment:"",comment_id:0}),w=e=>{e.preventDefault(),n("/wants_registration",{onSuccess:()=>C()})},u=e=>{n(`/wants_del/${e}`,{method:"delete"})},[y,p]=l.useState(!1),[S,h]=l.useState(null),b=e=>{h(e),p(!0)},I=()=>{p(!1),h(null)},L=(e,x)=>{D.patch(`/wants/achieve/${e}`,{achieve:x?1:0},{preserveScroll:!0})},[M,m]=l.useState(!1),[N,r]=l.useState(null),T=e=>{const A=d.find(g=>g.target_id===e.id&&g.target_type===4)??{id:e.comment_id??0,team_id:v??0,user_id_to:e.user_id,target_type:4,target_id:e.id,title:e.title,date:e.date,comment:""};r(A),m(!0)},E=()=>{m(!1),r(null)},O=e=>{n("/comments",{...e,onSuccess:()=>{m(!1),r(null)}})};return t.jsxs(q,{header:t.jsxs("h1",{className:"flex gap-2 items-center justify-center text-lg font-semibold leading-tight text-[#374151]",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:18,height:18,children:t.jsx("path",{d:"M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z",fill:"#374151"})}),i]}),children:[t.jsx(k,{title:i}),t.jsx(P,{category:6}),t.jsxs("form",{onSubmit:w,children:[t.jsxs("ul",{className:"flex flex-col gap-2 w-full mt-2 mb-4",children:[t.jsxs("li",{children:[t.jsx(o,{value:"日付"}),t.jsx(J,{type:"date",value:s.date,className:"w-full max-w-52 mt-2",onChange:e=>a("date",e.target.value),required:!0})]}),t.jsxs("li",{children:[t.jsx(o,{value:"買ったもの"}),t.jsx(z,{type:"text",value:s.title,className:"w-full mt-2",onChange:e=>a("title",e.target.value),required:!0})]}),t.jsxs("li",{children:[t.jsx(o,{value:"金額"}),t.jsx(Q,{type:"number",value:s.price,className:"w-full mt-2",onChange:e=>a("price",Number.parseFloat(e.target.value)),required:!0})]}),t.jsxs("li",{children:[t.jsx(o,{htmlFor:"memo",value:"メモ"}),t.jsx($,{name:"memo",value:s.memo,className:"w-full mt-2",onChange:e=>a("memo",e.target.value)})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(R,{name:"is_shared",checked:s.is_shared===0,onChange:e=>a("is_shared",e.target.checked?0:1)}),t.jsx(o,{htmlFor:"is_shared",value:"家族と共有する"})]})]}),t.jsx(B,{type:"submit",disabled:_,className:"block mx-auto",children:"追加"})]}),t.jsx(K,{data:f,targetType:4,onToggleAchieve:L,userId:c.id,teamId:c.team_id,onComment:T,onEdit:b,onDelete:u,comments:d}),t.jsx(V,{isOpen:y,onClose:I,listData:S,isDelete:u}),t.jsx(G,{isCommentOpen:M,onCommentClose:E,listData:N,onSubmit:e=>O(e)})]})}export{ue as default};
