import{K as A,m as F,r as o,j as t,L as H,S as k}from"./app-a5Z67Sxk.js";import{A as D}from"./AuthenticatedLayout-D08LvVzT.js";import{F as q}from"./FarstView-Dj1eLrt8.js";import{I as l}from"./InputLabel-D6vJR-Sm.js";import{P}from"./PrimaryButton-nhEvVEjN.js";import{C as B}from"./Checkbox-C7jCAUav.js";import{T as R}from"./TextInput-C8uLJfbC.js";import{I as $,L as K,E as V}from"./GenericList-PWpZFRkw.js";import{C as G}from"./Comment-DufeItrM.js";import{I as J,a as Q}from"./InputPrice-Cu0q-h8d.js";import"./ApplicationLogo-Cen0c3bu.js";import"./Modal-2Thaw8CE.js";import"./transition-C5Yu2ol5.js";import"./dialog-gkUueo9u.js";import"./PrimaryButton-SKXcVchN.js";function ue({household:g}){const{auth:f,team_id:j,role:U}=A().props,i=f.user,{data:s,setData:a,post:m,reset:v,processing:C}=F({title:"",price:0,date:"",achieve:0,is_shared:1,images:"",memo:"",comment:"",comment_id:0}),_=e=>{e.preventDefault(),m("/household_registration",{onSuccess:()=>v()})},c=e=>{m(`/household_del/${e}`,{method:"delete"})},[w,d]=o.useState(!1),[M,u]=o.useState(null),S=e=>{u(e),d(!0)},b=()=>{d(!1),u(null)},I=(e,p)=>{k.patch(`/household/achieve/${e}`,{achieve:p?1:0},{preserveScroll:!0})},[y,n]=o.useState(!1),[z,r]=o.useState(null),[L,W]=o.useState([]),N=e=>{const T=L.find(x=>x.target_id===e.id&&x.target_type===h)??{id:e.comment_id??0,team_id:j??0,user_id_to:e.user_id,target_type:0,target_id:e.id,title:e.title,date:e.date,comment:""};r(T),n(!0)},E=()=>{n(!1),r(null)},h=0,O=e=>{m("/comments",{...e,onSuccess:()=>{n(!1),r(null)}})};return t.jsxs(D,{header:t.jsxs("h1",{className:"flex gap-2 items-center justify-center text-lg font-semibold leading-tight text-[#374151]",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:18,height:18,children:t.jsx("path",{d:"M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zM96 64l192 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L96 160c-17.7 0-32-14.3-32-32l0-32c0-17.7 14.3-32 32-32zm32 160a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM96 352a32 32 0 1 1 0-64 32 32 0 1 1 0 64zM64 416c0-17.7 14.3-32 32-32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-96 0c-17.7 0-32-14.3-32-32zM192 256a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zm64-64a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM288 448a32 32 0 1 1 0-64 32 32 0 1 1 0 64z",fill:"#374151"})}),"家計簿"]}),children:[t.jsx(H,{title:"家計簿"}),t.jsx(q,{category:6}),t.jsxs("form",{onSubmit:_,children:[t.jsxs("ul",{className:"flex flex-col gap-2 w-full mt-2 mb-4",children:[t.jsxs("li",{children:[t.jsx(l,{value:"日付"}),t.jsx(J,{type:"date",value:s.date,className:"w-full max-w-52 mt-2",onChange:e=>a("date",e.target.value),required:!0})]}),t.jsxs("li",{children:[t.jsx(l,{value:"買ったもの"}),t.jsx($,{type:"text",value:s.title,className:"w-full mt-2",onChange:e=>a("title",e.target.value),required:!0})]}),t.jsxs("li",{children:[t.jsx(l,{value:"金額"}),t.jsx(Q,{type:"number",value:s.price,className:"w-full mt-2",onChange:e=>a("price",Number.parseFloat(e.target.value)),required:!0})]}),t.jsxs("li",{children:[t.jsx(l,{htmlFor:"memo",value:"メモ"}),t.jsx(R,{name:"memo",value:s.memo,className:"w-full mt-2",onChange:e=>a("memo",e.target.value)})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(B,{name:"is_shared",checked:s.is_shared===0,onChange:e=>a("is_shared",e.target.checked?0:1)}),t.jsx(l,{htmlFor:"is_shared",value:"家族と共有する"})]})]}),t.jsx(P,{type:"submit",disabled:C,className:"block mx-auto",children:"追加"})]}),t.jsx(K,{data:g,targetType:h,onToggleAchieve:I,userId:i.id,teamId:i.team_id,onComment:N,onEdit:S,onDelete:c,comments:[]}),t.jsx(V,{isOpen:w,onClose:b,listData:M,isDelete:c}),t.jsx(G,{isCommentOpen:y,onCommentClose:E,listData:z,onSubmit:e=>O(e)})]})}export{ue as default};
