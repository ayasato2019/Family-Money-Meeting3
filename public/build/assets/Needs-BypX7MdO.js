import{K as A,m as F,r as o,j as t,L as H,S as k}from"./app-Ca-JQL1M.js";import{A as D}from"./AuthenticatedLayout-BS_fSA87.js";import{F as q}from"./FarstView-DeMY4lQy.js";import{I as a}from"./InputLabel-BuG2zrcT.js";import{P}from"./PrimaryButton-CWpiPWTA.js";import{C as B}from"./Checkbox-8chb14pt.js";import{T as R}from"./TextInput-DKXVPXeZ.js";import{I as $,L as K,E as V}from"./GenericList-BlC-JiOB.js";import{C as G}from"./Comment-BlBetAU8.js";import{I as J,a as Q}from"./InputPrice-D-QPCQcw.js";import"./ApplicationLogo-BvqFWbqZ.js";import"./Modal-CvM92k2U.js";import"./transition-ULmtSKfL.js";import"./dialog-CD9WmL_H.js";import"./PrimaryButton-P3rSUI-t.js";function ue({listdata:f}){const i="ひつよう",{auth:j,team_id:v,role:W,comments:c}=A().props,d=j.user,{data:s,setData:l,post:n,reset:C,processing:_}=F({title:"",price:0,date:"",achieve:1,is_shared:0,images:"",memo:"",comment:"",comment_id:0}),w=e=>{e.preventDefault(),n("/needs_registration",{onSuccess:()=>C()})},u=e=>{n(`/needs_del/${e}`,{method:"delete"})},[y,p]=o.useState(!1),[S,h]=o.useState(null),b=e=>{h(e),p(!0)},I=()=>{p(!1),h(null)},M=(e,x)=>{k.patch(`/needs/achieve/${e}`,{achieve:x?1:0},{preserveScroll:!0})},[L,m]=o.useState(!1),[N,r]=o.useState(null),T=e=>{const O=c.find(g=>g.target_id===e.id&&g.target_type===3)??{id:e.comment_id??0,team_id:v??0,user_id_to:e.user_id,target_type:3,target_id:e.id,title:e.title,date:e.date,comment:""};r(O),m(!0)},z=()=>{m(!1),r(null)},E=e=>{n("/comments",{...e,onSuccess:()=>{m(!1),r(null)}})};return t.jsxs(D,{header:t.jsxs("h1",{className:"flex gap-2 items-center justify-center text-lg font-semibold leading-tight text-[#374151]",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",width:24,height:20,children:t.jsx("path",{d:"M337.8 5.4C327-1.8 313-1.8 302.2 5.4L166.3 96 48 96C21.5 96 0 117.5 0 144L0 464c0 26.5 21.5 48 48 48l208 0 0-96c0-35.3 28.7-64 64-64s64 28.7 64 64l0 96 208 0c26.5 0 48-21.5 48-48l0-320c0-26.5-21.5-48-48-48L473.7 96 337.8 5.4zM96 192l32 0c8.8 0 16 7.2 16 16l0 64c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-64c0-8.8 7.2-16 16-16zm400 16c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 64c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-64zM96 320l32 0c8.8 0 16 7.2 16 16l0 64c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-64c0-8.8 7.2-16 16-16zm400 16c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 64c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-64zM232 176a88 88 0 1 1 176 0 88 88 0 1 1 -176 0zm88-48c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-16 0 0-16c0-8.8-7.2-16-16-16z",fill:"#374151"})}),"                ",i]}),children:[t.jsx(H,{title:i}),t.jsx(q,{category:6}),t.jsxs("form",{onSubmit:w,children:[t.jsxs("ul",{className:"flex flex-col gap-2 w-full mt-2 mb-4",children:[t.jsxs("li",{children:[t.jsx(a,{value:"日付"}),t.jsx(J,{type:"date",value:s.date,className:"w-full max-w-52 mt-2",onChange:e=>l("date",e.target.value),required:!0})]}),t.jsxs("li",{children:[t.jsx(a,{value:"買ったもの"}),t.jsx($,{type:"text",value:s.title,className:"w-full mt-2",onChange:e=>l("title",e.target.value),required:!0})]}),t.jsxs("li",{children:[t.jsx(a,{value:"金額"}),t.jsx(Q,{type:"number",value:s.price,className:"w-full mt-2",onChange:e=>l("price",Number.parseFloat(e.target.value)),required:!0})]}),t.jsxs("li",{children:[t.jsx(a,{htmlFor:"memo",value:"メモ"}),t.jsx(R,{name:"memo",value:s.memo,className:"w-full mt-2",onChange:e=>l("memo",e.target.value)})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(B,{name:"is_shared",checked:s.is_shared===0,onChange:e=>l("is_shared",e.target.checked?0:1)}),t.jsx(a,{htmlFor:"is_shared",value:"家族と共有する"})]})]}),t.jsx(P,{type:"submit",disabled:_,className:"block mx-auto",children:"追加"})]}),t.jsx(K,{data:f,targetType:3,onToggleAchieve:M,userId:d.id,teamId:d.team_id,onComment:T,onEdit:b,onDelete:u,comments:c}),t.jsx(V,{isOpen:y,onClose:I,listData:S,isDelete:u}),t.jsx(G,{isCommentOpen:L,onCommentClose:z,listData:N,onSubmit:e=>E(e)})]})}export{ue as default};
