import{K as F,m as H,r as o,j as t,L as k,S as D}from"./app-Ca-JQL1M.js";import{A as q}from"./AuthenticatedLayout-BS_fSA87.js";import{F as z}from"./FarstView-DeMY4lQy.js";import{I as l}from"./InputLabel-BuG2zrcT.js";import{P}from"./PrimaryButton-CWpiPWTA.js";import{C as B}from"./Checkbox-8chb14pt.js";import{T as R}from"./TextInput-DKXVPXeZ.js";import{I as $,L as K,E as V}from"./GenericList-BlC-JiOB.js";import{C as G}from"./Comment-BlBetAU8.js";import{I as J,a as Q}from"./InputPrice-D-QPCQcw.js";import"./ApplicationLogo-BvqFWbqZ.js";import"./Modal-CvM92k2U.js";import"./transition-ULmtSKfL.js";import"./dialog-CD9WmL_H.js";import"./PrimaryButton-P3rSUI-t.js";function ue({listdata:f}){const r="投資",{auth:j,team_id:v,role:W,comments:c}=F().props,d=j.user,{data:s,setData:a,post:n,reset:C,processing:_}=H({title:"",price:0,date:"",achieve:1,is_shared:0,images:"",memo:"",comment:"",comment_id:0}),w=e=>{e.preventDefault(),n("/investments_registration",{onSuccess:()=>C()})},u=e=>{n(`/investments_del/${e}`,{method:"delete"})},[S,h]=o.useState(!1),[b,p]=o.useState(null),y=e=>{p(e),h(!0)},I=()=>{h(!1),p(null)},M=(e,x)=>{D.patch(`/investments/achieve/${e}`,{achieve:x?1:0},{preserveScroll:!0})},[N,m]=o.useState(!1),[L,i]=o.useState(null),T=e=>{const A=c.find(g=>g.target_id===e.id&&g.target_type===2)??{id:e.comment_id??0,team_id:v??0,user_id_to:e.user_id,target_type:2,target_id:e.id,title:e.title,date:e.date,comment:""};i(A),m(!0)},E=()=>{m(!1),i(null)},O=e=>{n("/comments",{...e,onSuccess:()=>{m(!1),i(null)}})};return t.jsxs(q,{header:t.jsxs("h1",{className:"flex gap-2 items-center justify-center text-lg font-semibold leading-tight text-[#374151]",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:20,height:20,children:t.jsx("path",{d:"M160 80c0-26.5 21.5-48 48-48l32 0c26.5 0 48 21.5 48 48l0 352c0 26.5-21.5 48-48 48l-32 0c-26.5 0-48-21.5-48-48l0-352zM0 272c0-26.5 21.5-48 48-48l32 0c26.5 0 48 21.5 48 48l0 160c0 26.5-21.5 48-48 48l-32 0c-26.5 0-48-21.5-48-48L0 272zM368 96l32 0c26.5 0 48 21.5 48 48l0 288c0 26.5-21.5 48-48 48l-32 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48z",fill:"#374151"})}),r]}),children:[t.jsx(k,{title:r}),t.jsx(z,{category:6}),t.jsxs("form",{onSubmit:w,children:[t.jsxs("ul",{className:"flex flex-col gap-2 w-full mt-2 mb-4",children:[t.jsxs("li",{children:[t.jsx(l,{value:"日付"}),t.jsx(J,{type:"date",value:s.date,className:"w-full max-w-52 mt-2",onChange:e=>a("date",e.target.value),required:!0})]}),t.jsxs("li",{children:[t.jsx(l,{value:"買ったもの"}),t.jsx($,{type:"text",value:s.title,className:"w-full mt-2",onChange:e=>a("title",e.target.value),required:!0})]}),t.jsxs("li",{children:[t.jsx(l,{value:"金額"}),t.jsx(Q,{type:"number",value:s.price,className:"w-full mt-2",onChange:e=>a("price",Number.parseFloat(e.target.value)),required:!0})]}),t.jsxs("li",{children:[t.jsx(l,{htmlFor:"memo",value:"メモ"}),t.jsx(R,{name:"memo",value:s.memo,className:"w-full mt-2",onChange:e=>a("memo",e.target.value)})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(B,{name:"is_shared",checked:s.is_shared===0,onChange:e=>a("is_shared",e.target.checked?0:1)}),t.jsx(l,{htmlFor:"is_shared",value:"家族と共有する"})]})]}),t.jsx(P,{type:"submit",disabled:_,className:"block mx-auto",children:"追加"})]}),t.jsx(K,{data:f,targetType:2,onToggleAchieve:M,userId:d.id,teamId:d.team_id,onComment:T,onEdit:y,onDelete:u,comments:c}),t.jsx(V,{isOpen:S,onClose:I,listData:b,isDelete:u}),t.jsx(G,{isCommentOpen:N,onCommentClose:E,listData:L,onSubmit:e=>O(e)})]})}export{ue as default};
